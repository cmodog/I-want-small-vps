# QuickPVE

## 项目介绍

这是个帮助大家更好的玩转VPS的小项目，可以让VPS分出更多独立的系统(使用LXC容器)分给别人玩或者合租

但不会去支持kvm虚拟化开机，镜像不好做，不同系统的自动化安装都有所区别，学习成本较高

目前实现的功能如下

主机端安装PVE后稍微配置一下就可以用脚本一键开机，并为LXC容器分配允许使用的端口

客户端可以使用脚本一键配置端口转发

转发端口不用找鸡主配置，双方都省事

## 功能截图

![查看容器](https://user-images.githubusercontent.com/53931809/188633562-eddebfd7-72ee-4c86-8fda-d5934c4078bc.png)
![创建容器](https://user-images.githubusercontent.com/53931809/188633638-0a40df76-0141-4c06-89de-87039efba433.png)
![销毁容器](https://user-images.githubusercontent.com/53931809/188633690-83c820b3-fa1e-4dba-a033-14970411ae77.png)
![配置地址转换](https://user-images.githubusercontent.com/53931809/188633732-31233f68-e92c-4673-8c43-a9ffd802a9c8.png)

创建容器时候就会要求配置NAT转换，同时也可以直接运行项目下的iptables.sh脚本来配置转换

## 端口转发原理

在主机端上使用iptables配置目的地址端口转换，将发往主机的 指定端口段的流量包的目的地址 转换为内网容器IP

在容器上配置iptables将流量包的目的地址端口转换为容器本地端口

```text
转换前			8.8.8.8 --> 123.23.23.23:10022(主机公网IP)
主机转换后	 8.8.8.8 --> 192.168.1.100:10022(容器内网IP)
客户机转换后  8.8.8.8 --> 192.168.1.100:22
```

流量回去的时候会根据nat表自动转换回去
